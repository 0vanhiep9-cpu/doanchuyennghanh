{% extends 'nhanvien/base.html' %}

{% block content %}
<div class="max-w-4xl mx-auto mt-6">
    <div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
        
        <div class="bg-slate-800 text-white px-6 py-4 flex justify-between items-center">
            <h2 class="text-xl font-bold flex items-center gap-2">
                {% if is_adding %}
                    <i data-lucide="user-plus" class="w-5 h-5"></i> Th√™m M·ªõi ·ª®ng Vi√™n
                {% else %}
                    <i data-lucide="edit-3" class="w-5 h-5"></i> Ch·ªânh S·ª≠a H·ªì S∆°: {{ item.ho_ten }}
                {% endif %}
            </h2>
            <a href="{% url 'danh_sach_ung_vien' %}" class="text-slate-300 hover:text-white transition-colors">
                <i data-lucide="x" class="w-6 h-6"></i>
            </a>
        </div>
        
        <form method="POST" class="p-8 space-y-6">
            {% csrf_token %}
            
            <div>
                <h3 class="text-lg font-semibold text-blue-700 border-b border-blue-100 pb-2 mb-4 flex items-center gap-2">
                    <i data-lucide="user" class="w-4 h-4"></i> Th√¥ng Tin C√° Nh√¢n
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">H·ªç v√† T√™n <span class="text-red-500">*</span></label>
                        <input type="text" name="ho_ten" value="{{ item.ho_ten }}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none" required placeholder="Nh·∫≠p h·ªç t√™n ·ª©ng vi√™n">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Gi·ªõi t√≠nh</label>
                        <select name="gioi_tinh" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="Nam" {% if item.gioi_tinh == 'Nam' %}selected{% endif %}>Nam</option>
                            <option value="N·ªØ" {% if item.gioi_tinh == 'N·ªØ' %}selected{% endif %}>N·ªØ</option>
                            <option value="Kh√°c" {% if item.gioi_tinh == 'Kh√°c' %}selected{% endif %}>Kh√°c</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ng√†y sinh</label>
                        <input type="date" name="ngay_sinh" value="{{ item.ngay_sinh|date:'Y-m-d' }}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" name="email" value="{{ item.email }}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none" placeholder="email@example.com">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="text" name="sdt" value="{{ item.sdt }}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none" placeholder="09xxxxxxxx">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">V·ªã tr√≠ ·ª©ng tuy·ªÉn <span class="text-red-500">*</span></label>
                        <select name="ma_job" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none" required>
                            <option value="">-- Ch·ªçn v·ªã tr√≠ --</option>
                            {% for job in jobs %}
                                <option value="{{ job.ma_job }}" {% if item.ma_job.ma_job == job.ma_job %}selected{% endif %}>
                                    {{ job.ma_job }} - {{ job.vi_tri_cong_viec }} ({{ job.maphongban.tenphongban }})
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <div class="pt-4">
                <h3 class="text-lg font-semibold text-orange-700 border-b border-orange-100 pb-2 mb-4 flex items-center gap-2">
                    <i data-lucide="briefcase" class="w-4 h-4"></i> Ti·∫øn Tr√¨nh Tuy·ªÉn D·ª•ng
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giai ƒëo·∫°n hi·ªán t·∫°i</label>
                        <select name="giai_doan" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 outline-none">
                            <option value="S∆° lo·∫°i" {% if item.giai_doan == 'S∆° lo·∫°i' %}selected{% endif %}>1. S∆° lo·∫°i h·ªì s∆°</option>
                            <option value="Ki·ªÉm tra" {% if item.giai_doan == 'Ki·ªÉm tra' %}selected{% endif %}>2. Ki·ªÉm tra nƒÉng l·ª±c</option>
                            <option value="Ph·ªèng v·∫•n" {% if item.giai_doan == 'Ph·ªèng v·∫•n' %}selected{% endif %}>3. Ph·ªèng v·∫•n</option>
                            <option value="M·ªùi Offer" {% if item.giai_doan == 'M·ªùi Offer' %}selected{% endif %}>4. M·ªùi Offer</option>
                            <option value="Onboard" {% if item.giai_doan == 'Onboard' %}selected{% endif %}>5. Onboard (Nh·∫≠n vi·ªác)</option>
                            <option value="T·ª´ ch·ªëi" {% if item.giai_doan == 'T·ª´ ch·ªëi' %}selected{% endif %}>6. T·ª´ ch·ªëi / Lo·∫°i</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">K·∫øt qu·∫£ / Tr·∫°ng th√°i</label>
                        <select name="trang_thai" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 outline-none">
                            <option value="ƒêang x·ª≠ l√Ω" {% if item.trang_thai == 'ƒêang x·ª≠ l√Ω' %}selected{% endif %}>‚è≥ ƒêang x·ª≠ l√Ω</option>
                            <option value="Tuy·ªÉn d·ª•ng" {% if item.trang_thai == 'Tuy·ªÉn d·ª•ng' %}selected{% endif %}>‚úÖ Tuy·ªÉn d·ª•ng (ƒê·∫°t)</option>
                            <option value="Kh√¥ng tuy·ªÉn" {% if item.trang_thai == 'Kh√¥ng tuy·ªÉn' %}selected{% endif %}>‚ùå Kh√¥ng tuy·ªÉn (Tr∆∞·ª£t)</option>
                            <option value="T·ª´ ch·ªëi offer" {% if item.trang_thai == 'T·ª´ ch·ªëi offer' %}selected{% endif %}>üö´ ·ª®ng vi√™n t·ª´ ch·ªëi offer</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ng√†y ph·ªèng v·∫•n (N·∫øu c√≥)</label>
                        <input type="date" name="ngay_pv" value="{{ item.ngay_pv|date:'Y-m-d' }}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 outline-none">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Gi·ªù ph·ªèng v·∫•n</label>
                        <input type="time" name="gio_pv" value="{{ item.gio_pv|time:'H:i' }}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 outline-none">
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">ƒê·ªãa ƒëi·ªÉm ph·ªèng v·∫•n / Link Online</label>
                        <input type="text" name="dia_diem_pv" value="{{ item.dia_diem_pv }}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500 outline-none" placeholder="VD: Ph√≤ng h·ªçp 2 ho·∫∑c Link Google Meet...">
                    </div>
                </div>
            </div>

            <div class="pt-6 border-t border-gray-200 flex justify-end gap-3">
                <a href="{% url 'danh_sach_ung_vien' %}" class="px-6 py-2.5 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors">
                    H·ªßy b·ªè
                </a>
                <button type="submit" class="px-6 py-2.5 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md transition-transform active:scale-95">
                    {% if is_adding %}L∆∞u H·ªì S∆°{% else %}C·∫≠p Nh·∫≠t{% endif %}
                </button>
            </div>

        </form>
    </div>
</div>
{% endblock %}